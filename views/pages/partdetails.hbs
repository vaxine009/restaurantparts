{{#> master}}

{{#*inline "content"}}
    <link href="../css/pagination.css" rel="stylesheet" type="text/css">
<div class="row">
    <div class="col-sm-10 col-sm-offset-1 paddingT20 paddingB20" id="resultcontainer">

        <div class="row paddingT20">
            <div class="col-xs-12 paddingT20">
<h3 clsas="text-center">Part Details</h3>

                <ul id="parts-list" class="list-group">
                    <!-- Parts list items will be rendered here -->
                </ul>
                <nav aria-label="Page navigation"></nav>
                <ul id="pagination" class="pagination">
                    <!-- Pagination links will be rendered here -->
                </ul>
                </nav>

            </div>
        </div>
    </div>
</div>

<div id="mainPictureModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <img id="mainPictureModalImg" src="" class="img-responsive" alt="Main Picture">
            </div>
        </div>
    </div>
</div>

<div id="picture2Modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <img id="picture2ModalImg" src="" class="img-responsive" alt="Picture 2">
            </div>
        </div>
    </div>
</div>

<div id="picture3Modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <img id="picture3ModalImg" src="" class="img-responsive" alt="Picture 3">
            </div>
        </div>
    </div>
</div>

<div id="picture4Modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <img id="picture4ModalImg" src="" class="img-responsive" alt="Picture 4">
            </div>
        </div>
    </div>
</div>

<div id="picture5Modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <img id="picture5ModalImg" src="" class="img-responsive" alt="Picture 5">
            </div>
        </div>
    </div>
</div>

{{/inline}}
{{/master}}

<script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.6.0/pagination.min.js"></script>

<script>
    const parts = {{{ safeJson parts }}}; // Use triple braces to avoid escaping

    console.log(parts);

    $(document).ready(function () {
        $('#pagination').pagination({
            dataSource: parts,
            pageSize: 5,
            showSizeChanger: true,
            autoHidePrevious: true,
            autoHideNext: true,
            pageRange: null,
            callback: function (data, pagination) {
                var html = data.map(part => `
            <li class="list-group-item">
              <h4>${part.description}</h4>
              <p><strong>Category:</strong> ${part.category}</p>
              <p><strong>Price:</strong> $${part.price}</p>
              <p>${part.quantity === 0 ? '<strong class="text-danger">Out of Stock</strong>' : ''}</p>
              <div class="row">
              <div class="col-xs-2">
                <a href="#" data-toggle="modal" data-target="#mainPictureModal" onclick="$('#mainPictureModalImg').attr('src', '../images/speciality_images/${part.mainPicture}');">
                  <img src="../images/speciality_images/${part.mainPicture}" class="img-thumbnail" alt="Main Picture">
                </a>
              </div>
              <div class="col-xs-2">
                ${part.picture2 ? `<a href="#" data-toggle="modal" data-target="#picture2Modal" onclick="$('#picture2ModalImg').attr('src', '../images/speciality_images/${part.picture2}');">
                  <img src="../images/speciality_images/${part.picture2}" class="img-thumbnail" alt="Picture 2">
                </a>` : ''}
              </div>
              <div class="col-xs-2">
                ${part.picture3 ? `<a href="#" data-toggle="modal" data-target="#picture3Modal" onclick="$('#picture3ModalImg').attr('src', '../images/speciality_images/${part.picture3}');">
                  <img src="../images/speciality_images/${part.picture3}" class="img-thumbnail" alt="Picture 3">
                </a>` : ''}
              </div>
              <div class="col-xs-2">
                ${part.picture4 ? `<a href="#" data-toggle="modal" data-target="#picture4Modal" onclick="$('#picture4ModalImg').attr('src', '../images/speciality_images/${part.picture4}');">
                  <img src="../images/speciality_images/${part.picture4}" class="img-thumbnail" alt="Picture 4">
                </a>` : ''}
              </div>
              <div class="col-xs-2">
                ${part.picture5 ? `<a href="#" data-toggle="modal" data-target="#picture5Modal" onclick="$('#picture5ModalImg').attr('src', '../images/speciality_images/${part.picture5}');">
                  <img src="../images/speciality_images/${part.picture5}" class="img-thumbnail" alt="Picture 5">
                </a>` : ''}
              </div>
            </div>
            </li>
          `).join('');
                $('#parts-list').html(html);
            }
        });
    });
</script>